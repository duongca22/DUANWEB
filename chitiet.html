<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Chi ti·∫øt s·∫£n ph·∫©m</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="chitiet.css">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- HEADER -->
  <header class="navbar">
    <div class="navbar-logo">
      <a href="index.html"><img src="img/logo.svg" alt=""></a>
    </div>
    <div class="navbar-menu">
      <a href="index.html">TRANG CH·ª¶</a>
      <a href="ao.html">√ÅO</a>
      <a href="lienhe.html">LI√äN H·ªÜ</a>
    </div>
    <div class="navbar-search">
      <input type="text" id="searchInput" placeholder="B·∫°n t√¨m g√¨..." />
      <i class="icon-search">üîç</i>
    </div>
    <div class="navbar-icons">
      <a href="giohang.html"><i class="fas fa-bag-shopping"></i></a>
    </div>
  </header>

  <div class="wrapper">
    <div class="breadcrumb">
      <a href="index.html">Trang ch·ªß</a> | <a href="ao.html">√Åo</a> | <strong id="product-name-small">Chi ti·∫øt</strong>
    </div>

    <div class="container">
      <!-- C·ªôt tr√°i -->
      <div class="left-column">
        <img id="main-img" class="main-img" src="" alt="S·∫£n ph·∫©m">
        <div class="thumbnail-list" id="thumbnails"></div>
      </div>

      <!-- C·ªôt ph·∫£i -->
      <div class="right-column">
        <div class="product-title" id="product-name"></div>
        <div class="product-code" id="product-code"></div>
        <div class="product-price" id="product-price"></div>
        <div style="margin-top: 15px;"><strong>K√≠ch c·ª°:</strong></div>
        <div class="size-options" id="size-options" style="margin-bottom: 20px;"></div>
        <label>S·ªë l∆∞·ª£ng:
          <input type="number" id="product-qty" value="1" min="1" style="width: 60px; margin-left: 10px;">
        </label>
        <br>
        <button class="btn-add" onclick="addToCart()">TH√äM V√ÄO GI·ªé H√ÄNG</button>
        <div class="description" id="product-description"></div>
      </div>
    </div>
    <div class="related-section">
      <h3>S·∫£n ph·∫©m li√™n quan</h3>
      <div class="related-list" id="relatedList"></div>
    </div>
  </div>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="footer-container">
      <div class="footer-column">
        <img src="img/logo.svg" alt="OWEN Logo" class="footer-logo">
        <p><strong>C√îNG TY C·ªî PH·∫¶N TH·ªúI TRANG KOWIL VI·ªÜT NAM</strong></p>
        <p>Hotline: <strong>1900 8079</strong></p>
        <p>8:30 - 19:00 t·∫•t c·∫£ c√°c ng√†y trong tu·∫ßn.</p><br>
        <p><strong>VP Ph√≠a B·∫Øc:</strong> T·∫ßng 17 t√≤a nh√† Viwaseen, 48 Ph·ªë T·ªë H·ªØu, H√† N·ªôi.</p>
        <p><strong>VP Ph√≠a Nam:</strong> 186A Nam K·ª≥ Kh·ªüi Nghƒ©a, Q3, TP.HCM</p>
      </div>
      <div class="footer-column">
        <h3>GI·ªöI THI·ªÜU OWEN</h3>
        <ul>
          <li><a href="#">Gi·ªõi thi·ªáu</a></li>
          <li><a href="#">Blog</a></li>
          <li><a href="#">H·ªá th·ªëng c·ª≠a h√†ng</a></li>
          <li><a href="#">Li√™n h·ªá</a></li>
          <li><a href="#">Ch√≠nh s√°ch b·∫£o m·∫≠t</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h3>H·ªñ TR·ª¢ KH√ÅCH H√ÄNG</h3>
        <ul>
          <li><a href="#">H·ªèi ƒë√°p</a></li>
          <li><a href="#">Ch√≠nh s√°ch v·∫≠n chuy·ªÉn</a></li>
          <li><a href="#">H∆∞·ªõng d·∫´n ch·ªçn k√≠ch c·ª°</a></li>
          <li><a href="#">H∆∞·ªõng d·∫´n thanh to√°n</a></li>
          <li><a href="#">ƒê·ªïi h√†ng</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h3>K·∫æT N·ªêI</h3>
        <div class="social-icons">
          <a href="#"><img src="img/logofb.png" alt="Facebook"></a>
          <a href="#"><img src="img/logoist.jpg" alt="Instagram"></a>
          <a href="#"><img src="img/logoytb.png" alt="YouTube"></a>
        </div>
      </div>
    </div>
  </footer>

  <!-- SCRIPT: N√äN ƒê·∫∂T product.js TR∆Ø·ªöC script b√™n d∆∞·ªõi -->
  <script src="product.js"></script>
  <script>
    const params = new URLSearchParams(window.location.search);
    const productId = parseInt(params.get("id"));
    const product = sanPhamNoiBat.find(p => p.id === productId);

    if (!product) {
      document.body.innerHTML = "<p>Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m</p>";
    } else {
      document.getElementById("main-img").src = product.images[0];
      document.getElementById("product-name").textContent = product.name;
      document.getElementById("product-name-small").textContent = product.name;
      document.getElementById("product-code").textContent = "M√£ SP: " + product.code;
      document.getElementById("product-price").textContent = product.price.toLocaleString() + " ‚Ç´";
      document.getElementById("product-description").textContent = product.description;
      // Ch·ªâ set m√†u n·∫øu c√≥ color-box
      const colorBox = document.getElementById("color-box");
      if (colorBox) colorBox.style.backgroundColor = product.color;

      const sizeOptions = document.getElementById("size-options");
      product.sizes.forEach(size => {
        const btn = document.createElement("button");
        btn.textContent = size;
        btn.onclick = () => {
          document.querySelectorAll(".size-options button").forEach(b => b.style.border = "1px solid #ccc");
          btn.style.border = "2px solid black";
          selectedSize = size;
        };
        sizeOptions.appendChild(btn);
      });

      const thumbList = document.getElementById("thumbnails");
      product.images.forEach(img => {
        const thumb = document.createElement("img");
        thumb.src = img;
        thumb.onclick = () => {
          document.getElementById("main-img").src = img;
        };
        thumbList.appendChild(thumb);
      });
    }

    let selectedSize = null;

  function addToCart() {
  const qty = parseInt(document.getElementById("product-qty").value);
  if (!selectedSize) return alert("Vui l√≤ng ch·ªçn k√≠ch c·ª°!");
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  const existing = cart.find(i => i.id === product.id && i.size === selectedSize);
  if (existing) {
    existing.quantity += qty; // Ch·ªâ d√πng quantity!
  } else {
    cart.push({ ...product, size: selectedSize, quantity: qty }); // Ch·ªâ d√πng quantity!
  }
  localStorage.setItem("cart", JSON.stringify(cart));
  alert("ƒê√£ th√™m v√†o gi·ªè h√†ng!");
}


    // S·∫¢N PH·∫®M LI√äN QUAN
    function renderRelatedProducts() {
      const related = sanPhamNoiBat
        .filter(p => p.category === product.category && p.id !== product.id)
        .slice(0, 4);
      const relatedList = document.getElementById("relatedList");
      relatedList.innerHTML = "";
      related.forEach(sp => {
        const el = document.createElement("div");
        el.className = "related-item";
        el.innerHTML = `
          <a href="chitiet.html?id=${sp.id}">
            <img src="${sp.image}" alt="${sp.name}">
            <div class="name">${sp.name}</div>
            <div class="price">${sp.price.toLocaleString()} ‚Ç´</div>
          </a>
        `;
        relatedList.appendChild(el);
      });
    }
    renderRelatedProducts();
  </script>
</body>
</html>
